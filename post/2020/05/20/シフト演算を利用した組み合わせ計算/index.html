<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>シフト演算を利用した組み合わせ計算 | takayuki211.github.io</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">シフト演算を利用した組み合わせ計算</span></h1>

<h2 class="date">2020/05/20</h2>
</div>

<main>
<h3 id="課題意識">課題意識</h3>
<p>最近AtCoderを始めたが（正確に言うと、以前一度やり始めて、放置していた。今回こそは続ける。）、組み合わせについてfor文で計算するにあたってシフト演算を利用する方法があることを知ったのでメモしておく。</p>
<h3 id="問題">問題</h3>
<p>ABC048 C - たくさんの数式
<a href="https://atcoder.jp/contests/arc061/tasks/arc061_a">https://atcoder.jp/contests/arc061/tasks/arc061_a</a></p>
<h3 id="解答">解答</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#!/usr/bin/env python3</span>

s <span style="color:#f92672">=</span> input()
n <span style="color:#f92672">=</span> len(s)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>

ss <span style="color:#f92672">=</span> []
<span style="color:#66d9ef">for</span> l <span style="color:#f92672">in</span> s:
    ss<span style="color:#f92672">.</span>append(l)
    ss<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#39;&#39;</span>)
s_list <span style="color:#f92672">=</span> ss[:<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
s_list_tmp <span style="color:#f92672">=</span> s_list<span style="color:#f92672">.</span>copy()

ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span><span style="color:#f92672">&lt;&lt;</span>n): <span style="color:#75715e"># (1)組み合わせでループ</span>
    s_list_tmp <span style="color:#f92672">=</span> s_list<span style="color:#f92672">.</span>copy()
    <span style="color:#66d9ef">for</span> k <span style="color:#f92672">in</span> range(n): <span style="color:#75715e"># (2)桁でループ</span>
        <span style="color:#66d9ef">if</span> i<span style="color:#f92672">&gt;&gt;</span>k<span style="color:#f92672">&amp;</span><span style="color:#ae81ff">1</span>: <span style="color:#75715e"># (3)k桁目が1のときの処理</span>
            s_list_tmp[<span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>k<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;_&#39;</span>

    s_str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">.</span>join(s_list_tmp)
    p_str <span style="color:#f92672">=</span> s_str<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;_&#39;</span>)
    p_list <span style="color:#f92672">=</span> list(map(int, p_str))
    ans <span style="color:#f92672">+=</span> sum(p_list)

<span style="color:#66d9ef">print</span>(ans)
</code></pre></div><h3 id="考察">考察</h3>
<p>入力されたテキストのどこに+を挿入するべきか、という問題として捉えた。</p>
<p>(1)で<code>1&lt;&lt;n</code>としているが、これは1をn桁シフトしている。n=3のとき、1&laquo;3となり、これは2進数表記では1000となる（10進数の9として処理される）。forループはこの数未満の回数となるから、8回ループが回ることになる。</p>
<p>(2)において桁数でループする。例えばn=3では、000~111の場合を計算したい。この場合、3桁を調べれば良い。</p>
<p>(3)k桁目が1である場合に処理を行うこととしている。これによって、組み合わせをバイナリな表現によって処理している。</p>

</main>

  <footer>
  <script src="//yihui.name/js/math-code.js"></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script async src="//yihui.name/js/center-img.js"></script>

  
  <hr/>
  © <a href="https://takayuki211.github.io">Takayuki Yamamoto</a> 2020 | <a href="https://github.com/takayuki211">Github</a> | <a href="https://twitter.com/takayuki211">Twitter</a>
  
  </footer>
  </body>
</html>

